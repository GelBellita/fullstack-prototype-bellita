<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Full-Stack App (Student Build)</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="style.css">
</head>

<body class="not-authenticated">

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-dark shadow-sm px-4">
  <div class="container-fluid">
    <a class="navbar-brand" href="#/">Full-Stack App (BELLITA ENGEL B.)</a>
    <ul class="navbar-nav ms-auto align-items-center">

      <!-- Visible when NOT logged in -->
      <li class="nav-item role-logged-out"><a class="nav-link" href="#/login">Login</a></li>
      <li class="nav-item role-logged-out"><a class="nav-link" href="#/register">Register</a></li>

      <!-- Visible when logged in -->
      <li class="nav-item dropdown role-logged-in">
        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
          <span id="nav-username">User</span>
        </a>
        <ul class="dropdown-menu dropdown-menu-end">
          <li><a class="dropdown-item" href="#/profile">Profile</a></li>
          <li><a class="dropdown-item" href="#/requests">My Requests</a></li>
          <!-- Admin only -->
          <li class="role-admin"><hr class="dropdown-divider my-1"></li>
          <li class="role-admin"><a class="dropdown-item" href="#/employees">Employees</a></li>
          <li class="role-admin"><a class="dropdown-item" href="#/accounts">Accounts</a></li>
          <li class="role-admin"><a class="dropdown-item" href="#/departments">Departments</a></li>
          <li><hr class="dropdown-divider"></li>
          <li><button class="dropdown-item text-danger" onclick="logout()">Logout</button></li>
        </ul>
      </li>

    </ul>
  </div>
</nav>

<!-- TOAST -->
<div class="position-fixed top-0 end-0 p-3" style="z-index:9999">
  <div id="toast" class="toast align-items-center text-white border-0" role="alert">
    <div class="d-flex">
      <div class="toast-body" id="toast-msg"></div>
      <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
    </div>
  </div>
</div>

<!-- MAIN -->
<main class="container py-5">

  <!-- HOME -->
  <section id="home-page" class="page active">
    <div class="card shadow-sm p-4">
      <h2 class="mb-3">Welcome to Full-Stack App</h2>
      <p class="text-muted">A static prototype before backend integration. Simulates:</p>
      <ul class="text-muted">
        <li>Email registration + fake verification</li>
        <li>Login with JWT-like token simulation</li>
        <li>Role-based UI (Admin/User)</li>
        <li>CRUD for Employees, Departments, Requests</li>
      </ul>
      <a href="#/register" class="btn btn-primary mt-3">Get Started</a>
    </div>
  </section>

  <!-- REGISTER -->
  <section id="register-page" class="page">
    <div class="form-box">
      <h3 class="mb-4">Create Account</h3>
      <form id="reg-form">
        <input type="text"     class="form-control mb-3" placeholder="First Name"             id="reg-first" required>
        <input type="text"     class="form-control mb-3" placeholder="Last Name"              id="reg-last"  required>
        <input type="email"    class="form-control mb-3" placeholder="Email"                  id="reg-email" required>
        <input type="password" class="form-control mb-3" placeholder="Password (min 6 chars)" id="reg-pw"    minlength="6" required>
        <button type="submit" class="btn btn-success w-100">Sign Up</button>
      </form>
      <div id="reg-error" class="text-danger mt-2"></div>
    </div>
  </section>

  <!-- VERIFY EMAIL -->
  <section id="verify-email-page" class="page">
    <div class="form-box">
      <h4 class="mb-3">Verify Your Email</h4>
      <div class="alert alert-success">
        ✅ A verification link has been sent to <strong><span id="verify-email-text"></span></strong>.
      </div>
      <p class="text-muted">click below for verification:</p>
      <div class="d-flex gap-2">
        <button class="btn btn-success w-100" onclick="fakeVerify()">✅ Simulate Email Verification</button>
        <a href="#/login" class="btn btn-outline-secondary w-100">Go to Login</a>
      </div>
    </div>
  </section>

  <!-- LOGIN -->
  <section id="login-page" class="page">
    <div class="form-box">
      <div id="verified-alert" class="alert alert-success mb-3" style="display:none;">
        ✅ Email verified! You may now log in.
      </div>
      <h3 class="mb-4">Login</h3>
      <form id="login-form">
        <input type="email"    class="form-control mb-3" placeholder="Email"    id="login-email" required>
        <input type="password" class="form-control mb-3" placeholder="Password" id="login-pw"    required>
        <button type="submit" class="btn btn-primary w-100">Login</button>
      </form>
      <div id="login-error" class="text-danger mt-2"></div>
    </div>
  </section>

  <!-- PROFILE -->
  <section id="profile-page" class="page">
    <div class="card p-4 shadow-sm" style="max-width:520px;margin:auto;">
      <h3 class="mb-3">My Profile</h3>
      <div id="profile-info"></div>
      <button class="btn btn-outline-primary mt-3" onclick="openEditProfile()">✏️ Edit Profile</button>

      <!-- Edit Profile Form (hidden by default) -->
      <div id="edit-profile-form" class="mt-4" style="display:none;">
        <hr>
        <h6 class="mb-3">Edit Profile</h6>
        <form id="edit-profile-el">
          <div class="row g-3">
            <div class="col-6">
              <input type="text" class="form-control" placeholder="First Name" id="edit-first" required>
            </div>
            <div class="col-6">
              <input type="text" class="form-control" placeholder="Last Name" id="edit-last" required>
            </div>
            <div class="col-12">
              <input type="email" class="form-control" placeholder="Email" id="edit-email" required>
            </div>
            <div class="col-12 d-flex gap-2">
              <button type="submit" class="btn btn-success">Save Changes</button>
              <button type="button" class="btn btn-outline-secondary" onclick="closeEditProfile()">Cancel</button>
            </div>
          </div>
        </form>
        <div id="edit-profile-error" class="text-danger mt-2"></div>
      </div>
    </div>
  </section>

  <!-- ACCOUNTS (admin) -->
  <section id="accounts-page" class="page">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h3 class="mb-0">Accounts</h3>
      <button class="btn btn-primary" onclick="openAccForm()">+ Add Account</button>
    </div>

    <div id="acc-form" class="card p-4 mb-4 shadow-sm side-form" style="display:none;">
      <h5 id="acc-form-title">Add Account</h5>
      <form id="acc-form-el" class="row g-3">
        <input type="hidden" id="acc-idx">
        <div class="col-md-6">
          <input type="text"     class="form-control" placeholder="First Name" id="acc-first" required>
        </div>
        <div class="col-md-6">
          <input type="text"     class="form-control" placeholder="Last Name"  id="acc-last"  required>
        </div>
        <div class="col-md-6">
          <input type="email"    class="form-control" placeholder="Email"      id="acc-email" required>
        </div>
        <div class="col-md-6">
          <input type="password" class="form-control" placeholder="Password (min 6)" id="acc-pw" minlength="6">
        </div>
        <div class="col-md-6">
          <select class="form-select" id="acc-role">
            <option value="user">User</option>
            <option value="admin">Admin</option>
          </select>
        </div>
        <div class="col-md-6 d-flex align-items-center">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="acc-verified">
            <label class="form-check-label" for="acc-verified">Verified</label>
          </div>
        </div>
        <div class="col-12 d-flex gap-2">
          <button type="submit" class="btn btn-success">Save</button>
          <button type="button" class="btn btn-outline-secondary" onclick="closeAccForm()">Cancel</button>
        </div>
      </form>
      <div id="acc-error" class="text-danger mt-2"></div>
    </div>

    <div class="table-responsive">
      <table class="table table-hover align-middle">
        <thead class="table-dark">
          <tr><th>Name</th><th>Email</th><th>Role</th><th>Verified</th><th>Actions</th></tr>
        </thead>
        <tbody id="acc-list"></tbody>
      </table>
    </div>
  </section>

  <!-- DEPARTMENTS (admin) -->
  <section id="departments-page" class="page">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h3 class="mb-0">Departments</h3>
      <button class="btn btn-primary" onclick="openDeptForm()">+ Add Department</button>
    </div>

    <div id="dept-form" class="card p-4 mb-4 shadow-sm side-form" style="display:none;">
      <h5 id="dept-form-title">Add Department</h5>
      <form id="dept-form-el" class="row g-3">
        <input type="hidden" id="dept-idx">
        <div class="col-md-6">
          <input type="text" class="form-control" placeholder="Department Name" id="dept-name" required>
        </div>
        <div class="col-md-6">
          <input type="text" class="form-control" placeholder="Description" id="dept-desc">
        </div>
        <div class="col-12 d-flex gap-2">
          <button type="submit" class="btn btn-success">Save</button>
          <button type="button" class="btn btn-outline-secondary" onclick="closeDeptForm()">Cancel</button>
        </div>
      </form>
    </div>

    <div class="table-responsive">
      <table class="table table-hover align-middle">
        <thead class="table-dark">
          <tr><th>Name</th><th>Description</th><th>Actions</th></tr>
        </thead>
        <tbody id="dept-list"></tbody>
      </table>
    </div>
  </section>

  <!-- EMPLOYEES (admin) -->
  <section id="employees-page" class="page">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h3 class="mb-0">Employees</h3>
      <button class="btn btn-primary" onclick="openEmpForm()">+ Add Employee</button>
    </div>

    <div id="emp-form" class="card p-4 mb-4 shadow-sm side-form" style="display:none;">
      <h5 id="emp-form-title">Add Employee</h5>
      <form id="emp-form-el" class="row g-3">
        <input type="hidden" id="emp-idx">
        <div class="col-md-4">
          <input type="text"  class="form-control" placeholder="Employee ID" id="emp-id"       required>
        </div>
        <div class="col-md-4">
          <input type="email" class="form-control" placeholder="User Email"  id="emp-email"    required>
        </div>
        <div class="col-md-4">
          <input type="text"  class="form-control" placeholder="Position"    id="emp-position" required>
        </div>
        <div class="col-md-6">
          <select class="form-select" id="emp-dept" required>
            <option value="">Select Department</option>
          </select>
        </div>
        <div class="col-md-6">
          <input type="date" class="form-control" id="emp-hire" required>
        </div>
        <div class="col-12 d-flex gap-2">
          <button type="submit" class="btn btn-success">Save</button>
          <button type="button" class="btn btn-outline-secondary" onclick="closeEmpForm()">Cancel</button>
        </div>
      </form>
      <div id="emp-error" class="text-danger mt-2"></div>
    </div>

    <div class="table-responsive">
      <table class="table table-hover align-middle">
        <thead class="table-dark">
          <tr><th>ID</th><th>User (Email)</th><th>Position</th><th>Department</th><th>Hire Date</th><th>Actions</th></tr>
        </thead>
        <tbody id="emp-list"></tbody>
      </table>
    </div>
  </section>

  <!-- REQUESTS -->
  <section id="requests-page" class="page">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h3 class="mb-0">My Requests</h3>
      <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#req-popup">+ New Request</button>
    </div>
    <div class="table-responsive">
      <table class="table table-hover align-middle">
        <thead class="table-dark">
          <tr><th>Date</th><th>Type</th><th>Items</th><th>Status</th></tr>
        </thead>
        <tbody id="req-list"></tbody>
      </table>
    </div>
  </section>

</main>

<!-- NEW REQUEST POPUP -->
<div class="modal fade" id="req-popup" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content border-0 rounded-4">
      <div class="modal-header">
        <h5 class="modal-title">New Request</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <form id="req-form">
          <div class="mb-3">
            <label class="form-label">Request Type</label>
            <select class="form-select" id="req-type">
              <option value="Equipment">Equipment</option>
              <option value="Leave">Leave</option>
              <option value="Resources">Resources</option>
            </select>
          </div>
          <div class="mb-3">
            <label class="form-label">Items</label>
            <div id="req-items"></div>
            <button type="button" class="btn btn-sm btn-outline-primary mt-2" onclick="addItem()">+ Add Item</button>
          </div>
          <div id="req-error" class="text-danger mt-2"></div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" onclick="submitReq()">Submit Request</button>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="script.js"></script>
</body>
</html>